<!DOCTYPE html>
<% @page_title = "UserAuth | Signup" %>
<head>
    <title>Erdos</title>
    <%= stylesheet_link_tag  '//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css' %>
    <%= csrf_meta_tags %>
    <%= action_cable_meta_tag %>
    <style>
        /*Styling placeholder text for input boxes*/
        ::-webkit-input-placeholder { /* Chrome/Opera/Safari */
            font-style: italic;
            letter-spacing: 2px;
        }
        ::-moz-placeholder { /* Firefox 19+ */
            font-style: italic;
            letter-spacing: 2px;
        }
        :-ms-input-placeholder { /* IE 10+ */
            font-style: italic;
            letter-spacing: 2px;
        }
        :-moz-placeholder { /* Firefox 18- */
            font-style: italic;
            letter-spacing: 2px;
        }

        h1 {
            padding: 10px;
            margin: auto;
            color: #222;
            text-align: center;
        }

        body {
            background-color: #03a079;
            padding: 0px;
            margin: 0px;
            text-align: center;
        }

        .outer {
            display: table;
            position: absolute;
            height: 100%;
            width: 100%;
        }

        .middle {
            display: table-cell;
            vertical-align: middle;
        }

        .inner {
            margin-left: auto;
            margin-right: auto;
            width: 60%;
        }

        #smallLogo {
            height: 175px;
        }

        input[type=text], input[type=password] {
            padding: 10px;
            display: inline-block;
            width: 100%;
            margin: 8px 0;
            border-radius: 0px;
            border: 1px solid #ddd;
            box-sizing: border-box;
            line-height: 2em;
        }

        .basicForm {
            background-color: #bbb;
            text-align: left;
            padding: 20px;
            border-radius: 5px;
            border: 2px solid #aaa;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }

        .submitButton {
            background-color: #eee;
            color: #444;
            border-radius: 0px;
            border: 1px solid #e1e1e1;
            cursor:pointer;
            width: 40%;
            padding: 12px 5px;
            margin: 8px 0;
        }

        .submitButton:hover {
            background-color: #444;
            color: #fff;
        }

        hr {
            border: 1px solid #ddd;
            width: 100%;
            margin: 0.5em 0 0.5em 0;
            text-align: center;
        }

        #signUpForm {
            overflow: hidden;
        }

        #guestLogin{
            display: none;
            overflow: hidden;
        }

        #closeBtn {
            font-size: 32px;
            float: right;
            cursor: pointer;
        }

        .options {
            display: inline-block;
            position: relative;
            width: 50%;
            text-align: center;
            margin: 0;
        }

        #option1 {
            float: left;
        }

        #option2 {
            float: right;
        }

        #loginBtn, #signUpBtn, #guestLoginBtn {
            width: 80%;
        }

    </style>
</head>
<body>
    <div class="outer">
    <div class="middle">
    <div class="inner">
        <div id="signUpForm" class="basicForm">
            <center><img src="/assets/logo.png" id="smallLogo"></center>
            <p><%= @user.errors.full_messages.first if @user.errors.any? %></p>
            <%= form_for(@user) do |f| %>
              <%= f.text_field :username, :placeholder => 'Enter Username' %><br>
              <%= f.password_field :password, :placeholder => 'Enter Password' %><br>
              <%= f.password_field :password_confirmation, :placeholder => 'Confirm Password'%><br>
              <%= f.label :userType, "User Type" %> &nbsp;&nbsp;
              <%= f.select :userType, ['Regular', 'Admin'], :selected => 'Regular' %><br>

              <center><%= f.submit "Create Account", class: "submitButton" %></center>
            <% end %>
            <hr>
            <div id="option1" class="options">
                Already have an account?
                <%= button_to "Login", "/login", method: :get, id: "loginBtn" , class: "submitButton" %>
            </div>
            <div id="option2" class="options">
                Don't want to create an account?<br>
                <%= submit_tag "Guest Login", id: "guestLoginBtn", class: "submitButton", :onclick => "showGuestLogin()" %>
            </div>
        </div>

        <div id="guestLogin" class="basicForm">
            <span id="closeBtn" onclick="closeGuestLogin()">&times;</span>
            <center><img src="/assets/logo.png" id="smallLogo"></center>
            <%= render partial: 'users/guestform', locals: {message: @message, chatroom: @chatroom}%>
            <hr>
            <div id="option1" class="options">
                Already have an account?
                <%= button_to "Login", "/login", method: :get, id: "loginBtn" , class: "submitButton" %>
            </div>
            <div id="option2" class="options">
                Want to create an account?<br>
                <%= submit_tag "Sign Up", id: "signUpBtn", class: "submitButton", :onclick => "closeGuestLogin()" %>
            </div>
        </div>

        <!--<%= link_to 'Back', users_path %>-->
    </div>
    </div>
    </div>

    <%= javascript_include_tag  '//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
    <script>


    function showGuestLogin(){
        $(document).ready(function(){
            $("#signUpForm").fadeOut("swing", function(){
                $("#guestLogin").fadeIn("swing");
            });
        });
    }

    function closeGuestLogin(){
        $("#guestLogin").fadeOut("swing", function(){
            $("#signUpForm").fadeIn("swing");
        });
    }
    </script>
</body>
</html>
